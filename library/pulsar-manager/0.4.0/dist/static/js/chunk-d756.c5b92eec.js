(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d756"],{"2Ayc":function(t,e,n){"use strict";n.d(e,"e",function(){return s}),n.d(e,"d",function(){return u}),n.d(e,"h",function(){return i}),n.d(e,"i",function(){return c}),n.d(e,"b",function(){return l}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return d}),n.d(e,"a",function(){return m}),n.d(e,"j",function(){return f}),n.d(e,"c",function(){return b});var r=n("t3Un"),a="/admin/v2",o="/pulsar-manager/admin/v2";function s(t){return Object(r.a)({url:o+"/clusters",method:"get",params:{query:t}})}function u(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t,method:"get"})}function i(t,e){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t,method:"put",data:e})}function c(t,e){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t,method:"post",data:e})}function l(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t,method:"delete"})}function p(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t+"/failureDomains",method:"get"})}function d(t,e){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t+"/failureDomains/"+e,method:"get"})}function m(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:a+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:n})}function f(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:a+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:n})}function b(t,e){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:a+"/clusters/"+t+"/failureDomains/"+e,method:"post"})}},ElEh:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var r=n("t3Un"),a="/pulsar-manager/admin/v2";function o(t){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-broker":t},url:"/admin/v2/broker-stats/topics",method:"get"})}function s(t){return Object(r.a)({headers:{"x-pulsar-broker":t},url:a+"/broker-stats/metrics?broker="+t,method:"get"})}},F2Sz:function(t,e,n){"use strict";n.d(e,"f",function(){return s}),n.d(e,"e",function(){return u}),n.d(e,"d",function(){return i}),n.d(e,"l",function(){return c}),n.d(e,"c",function(){return l}),n.d(e,"h",function(){return p}),n.d(e,"k",function(){return d}),n.d(e,"m",function(){return m}),n.d(e,"p",function(){return f}),n.d(e,"g",function(){return b}),n.d(e,"o",function(){return h}),n.d(e,"i",function(){return y}),n.d(e,"A",function(){return j}),n.d(e,"x",function(){return k}),n.d(e,"n",function(){return g}),n.d(e,"r",function(){return O}),n.d(e,"j",function(){return v}),n.d(e,"B",function(){return T}),n.d(e,"K",function(){return _}),n.d(e,"I",function(){return C}),n.d(e,"J",function(){return w}),n.d(e,"H",function(){return F}),n.d(e,"s",function(){return B}),n.d(e,"E",function(){return S}),n.d(e,"G",function(){return I}),n.d(e,"a",function(){return $}),n.d(e,"b",function(){return L}),n.d(e,"t",function(){return P}),n.d(e,"F",function(){return E}),n.d(e,"w",function(){return M}),n.d(e,"v",function(){return R}),n.d(e,"u",function(){return U}),n.d(e,"q",function(){return q}),n.d(e,"z",function(){return A}),n.d(e,"y",function(){return D}),n.d(e,"C",function(){return V}),n.d(e,"D",function(){return z});var r=n("t3Un"),a="/pulsar-manager/admin/v2",o="/admin/v2";function s(t,e){return Object(r.a)({url:a+"/namespaces/"+t,method:"get",params:{query:e}})}function u(t,e){return Object(r.a)({url:a+"/namespaces/"+t+"/"+e+"/stats",method:"get"})}function i(t){return Object(r.a)({url:o+"/namespaces/"+t,method:"get"})}function c(t,e,n){return Object(r.a)({url:o+"/namespaces/"+t+"/"+e,method:"put",data:n})}function l(t){return Object(r.a)({url:o+"/namespaces/"+t,method:"delete"})}function p(t){return Object(r.a)({url:o+"/namespaces/"+t+"/permissions",method:"get"})}function d(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/permissions/"+e,method:"post",data:n})}function m(t,e){return Object(r.a)({url:o+"/namespaces/"+t+"/permissions/"+e,method:"delete"})}function f(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/replication",method:"post",data:e})}function b(t,e){return Object(r.a)({url:o+"/namespaces/"+t+"/"+e+"/replication",method:"get"})}function h(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/backlogQuota",method:"post",data:e})}function y(t){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/persistence",method:"get"})}function j(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/persistence",method:"post",data:e})}function k(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/messageTTL",method:"post",data:e})}function g(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/antiAffinity",method:"post",data:e})}function O(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/deduplication",method:"post",data:e})}function v(t){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/retention",method:"get"})}function T(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/retention",method:"post",data:e})}function _(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:o+"/namespaces/"+e+"/unload",method:"put",data:n})}function C(t,e,n){return x("",t,e,n)}function w(t,e,n){return x(t,"",e,n)}function x(t,e,n,a){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t,"x-pulsar-broker":e},url:o+"/namespaces/"+n+"/"+a+"/unload",method:"put"})}function F(t,e,n,a){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:o+"/namespaces/"+e+"/"+n+"/split?unload="+a,method:"put"})}function B(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/dispatchRate",method:"post",data:e})}function S(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/subscribeRate",method:"post",data:e})}function I(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/subscriptionDispatchRate",method:"post",data:e})}function $(t,e){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:o+"/namespaces/"+e+"/clearBacklog",method:"post"})}function L(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:o+"/namespaces/"+e+"/"+n+"/clearBacklog",method:"post"})}function P(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/encryptionRequired",method:"post",data:e})}function E(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/subscriptionAuthMode",method:"post",data:e})}function M(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/maxProducersPerTopic",method:"post",data:e})}function R(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/maxConsumersPerTopic",method:"post",data:e})}function U(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/maxConsumersPerSubscription",method:"post",data:e})}function q(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/compactionThreshold",method:"put",data:e})}function A(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/offloadThreshold",method:"put",data:e})}function D(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/offloadDeletionLagMs",method:"put",data:e})}function V(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/schemaAutoUpdateCompatibilityStrategy",method:"put",data:e})}function z(t,e){return Object(r.a)({headers:{"Content-Type":"application/json"},url:o+"/namespaces/"+t+"/schemaValidationEnforced",method:"post",data:e})}},QTWJ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return u});var r=n("t3Un"),a="/admin/v2";function o(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/clusters/"+t+"/namespaceIsolationPolicies",method:"get"})}function s(t,e,n){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:a+"/clusters/"+t+"/namespaceIsolationPolicies/"+e,method:"post",data:n})}function u(t,e){return Object(r.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:a+"/clusters/"+t+"/namespaceIsolationPolicies/"+e,method:"delete"})}},WEE2:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return c});var r=n("t3Un"),a="/admin/v2",o="/pulsar-manager/admin/v2";function s(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:o+"/brokers/"+t,method:"get"})}function u(t){return Object(r.a)({headers:{"x-pulsar-cluster":t},url:a+"/brokers/"+t,method:"get"})}function i(t){return Object(r.a)({headers:{"x-pulsar-broker":t},url:a+"/brokers/configuration/runtime",method:"get"})}function c(t){return Object(r.a)({headers:{"x-pulsar-broker":t},url:a+"/brokers/health",method:"get"})}},Y5bG:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),Math.easeInOutQuad=function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e};var r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};function a(t,e,n){var a=document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop,o=t-a,s=0;e=void 0===e?500:e;!function t(){s+=20,function(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}(Math.easeInOutQuad(s,a,o,e)),s<e?r(t):n&&"function"==typeof n&&n()}()}},e2q0:function(t,e,n){"use strict";n.r(e);var r=n("P2sY"),a=n.n(r),o=n("2Ayc"),s=n("ElEh"),u=n("WEE2"),i=n("QTWJ"),c=n("F2Sz"),l=n("+n5z"),p=n("Mz3J"),d=n("Grqa");function m(t){return 200===t.status||204===t.status}var f=n("7Qib"),b=n("iXUw"),h={cluster:"",broker:""},y={name:"BrokerInfo",components:{Pagination:p.a,MdInput:d.a,jsonEditor:l.a},data:function(){return{postForm:a()({},h),clustersListOptions:[],brokersListOptions:[],brokerStats:[],bundleTableKey:0,bundleList:[],isolationPolicyList:[],isolationPolicyTableKey:0,dialogFormVisible:!1,jsonValue:{},firstInit:!1}},created:function(){this.postForm.cluster=this.$route.params&&this.$route.params.cluster,this.postForm.broker=this.$route.params&&this.$route.params.broker,this.firstInit=!0,this.getBrokerInfo(),this.getBrokerStats(),this.getIsolationPolicy(),this.getClusterList(),this.getBrokersList()},methods:{getBrokerInfo:function(){var t=this;Object(s.b)(this.postForm.broker).then(function(e){if(e.data)for(var n in t.brokerStatsTopic=e.data,"string"==typeof t.brokerStatsTopic&&(t.brokerStatsTopic={},t.$notify({title:"error",message:"Failed to fetch broker stats from broker "+t.postForm.broker,type:"error",duration:3e3})),t.brokerStatsTopic){var r=n.split("/");for(var a in t.brokerStatsTopic[n]){var o={};o.tenant=r[0],o.namespace=r[1],o.bundle=a,t.bundleList.push(o)}}})},changeBrokerInfo:function(){this.$router.push({path:"/management/brokers/"+this.postForm.cluster+"/"+this.postForm.broker+"/broker"})},getBrokerStats:function(){var t=this,e=0,n=0,r=0,a=0;Object(s.a)(this.postForm.broker).then(function(o){for(var s=0;s<o.data.length;s++)o.data[s].dimensions.hasOwnProperty("namespace")&&2===o.data[s].dimensions.namespace.split("/").length&&(e+=o.data[s].metrics.brk_in_tp_rate,n+=o.data[s].metrics.brk_out_tp_rate,r+=o.data[s].metrics.brk_in_rate,a+=o.data[s].metrics.brk_out_rate);t.brokerStats.push({inBytes:Object(f.a)(e),outBytes:Object(f.a)(n),inMsg:Object(b.numberFormatter)(r,2),outMsg:Object(b.numberFormatter)(a,2)})})},getClusterList:function(){var t=this;Object(o.e)(this.listQuery).then(function(e){if(e.data)for(var n=0;n<e.data.data.length;n++)t.clustersListOptions.push(e.data.data[n].cluster)})},getIsolationPolicy:function(){var t=this;Object(i.b)(this.postForm.cluster).then(function(e){var n=[];for(var r in e.data){for(var a in e.data[r].primary){new RegExp(e.data[r].primary[a]).test(t.postFormbroker)&&n.indexOf(r)<0&&n.push(r)}for(var o in e.data[r].secondary){new RegExp(e.data[r].secondary[o]).test(t.postFormbroker)&&n.indexOf(r)<0&&n.push(r)}n.indexOf(r)>=0&&t.isolationPolicyList.push({cluster:t.postForm.cluster,isolationPolicy:r,primaryBrokers:e.data[r].primary.length,secondaryBrokers:e.data[r].secondary.length})}})},getBrokersList:function(){var t=this;Object(u.a)(this.postForm.cluster).then(function(e){if(e.data){t.firstInit?t.firstInit=!1:t.postForm.broker="",t.brokersListOptions=[];for(var n=0;n<e.data.data.length;n++)t.brokersListOptions.push(e.data.data[n].broker)}})},handleUnloadBundle:function(t){var e=this;Object(c.I)(this.postForm.broker,t.tenant+"/"+t.namespace,t.bundle).then(function(t){m(t)?e.$notify({title:"success",message:"Successfully unload namespace bundle from the broker",type:"success",duration:3e3}):e.$notify({title:"error",message:"Failed to unload namespace bundle from the broker : "+t.data,type:"error",duration:3e3})})},handleHeartBeat:function(){var t=this;Object(u.c)(this.postForm.broker).then(function(e){m(e)?t.$notify({title:"success",message:"Health Check success",type:"success",duration:3e3}):t.$notify({title:"error",message:"Health Check failed: \n"+e.data,type:"error",duration:3e3})})},handleRuntimeConfig:function(){var t=this;Object(u.d)(this.postForm.broker).then(function(e){t.dialogFormVisible=!0,t.jsonValue=e.data})}}},j=n("KHd+"),k=Object(j.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"createPost-container"},[n("el-form",{staticClass:"form-container",attrs:{inline:!0,model:t.postForm}},[n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Cluster"}},[n("el-select",{attrs:{placeholder:"select cluster"},on:{change:function(e){return t.getBrokersList()}},model:{value:t.postForm.cluster,callback:function(e){t.$set(t.postForm,"cluster",e)},expression:"postForm.cluster"}},t._l(t.clustersListOptions,function(t,e){return n("el-option",{key:t+e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),n("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:"Broker"}},[n("el-select",{attrs:{filterable:"",placeholder:"select broker"},on:{change:function(e){return t.changeBrokerInfo()}},model:{value:t.postForm.broker,callback:function(e){t.$set(t.postForm,"broker",e)},expression:"postForm.broker"}},t._l(t.brokersListOptions,function(t,e){return n("el-option",{key:t+e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleHeartBeat}},[t._v("Heartbeat")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleRuntimeConfig}},[t._v("Runtime Config")])],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.brokerStats,border:""}},[n("el-table-column",{attrs:{label:t.$t("common.inMsg"),prop:"inMsg"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.outMsg"),prop:"outMsg"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.inBytes"),prop:"inBytes"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.outBytes"),prop:"outBytes"}})],1),t._v(" "),n("h4",[t._v("Owned Namespaces")]),t._v(" "),n("el-table",{key:t.bundleTableKey,staticStyle:{width:"100%"},attrs:{data:t.bundleList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:t.$t("tenant.label"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"link-type",attrs:{to:"/management/tenants/tenantInfo/"+e.row.tenant+"?tab=namespaces"}},[n("span",[t._v(t._s(e.row.tenant))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("namespace.label"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"link-type",attrs:{to:"/management/namespaces/"+e.row.tenant+"/"+e.row.namespace+"/namespace?tab=overview"}},[n("span",[t._v(t._s(e.row.namespace))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("namespace.bundle.label"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.bundle))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("namespace.bundle.operation"),align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"medium",type:"danger",icon:"el-icon-download"},on:{click:function(n){return t.handleUnloadBundle(e.row)}}},[t._v("Unload")])]}}])})],1),t._v(" "),n("h4",[t._v("Namespace Isolation Policies")]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.isolationPolicyList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:t.$t("ip.nameLabel"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"link-type",attrs:{to:"/management/clusters/"+e.row.cluster+"/"+e.row.isolationPolicy+"/namespaceIsolationPolicy"}},[n("span",[t._v(t._s(e.row.isolationPolicy))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("ip.numPBLabel"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.primaryBrokers))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("ip.numSBLabel"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.secondaryBrokers))])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("jsonEditor",{attrs:{value:t.jsonValue}})],1)],1)])},[],!1,null,null,null);k.options.__file="broker.vue";e.default=k.exports}}]);