(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0925"],{"2Ayc":function(t,e,n){"use strict";n.d(e,"e",function(){return l}),n.d(e,"d",function(){return r}),n.d(e,"h",function(){return o}),n.d(e,"i",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"g",function(){return d}),n.d(e,"f",function(){return m}),n.d(e,"a",function(){return f}),n.d(e,"j",function(){return p}),n.d(e,"c",function(){return h});var a=n("t3Un"),s="/admin/v2",i="/pulsar-manager/admin/v2";function l(t){return Object(a.a)({url:i+"/clusters",method:"get",params:{query:t}})}function r(t){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t,method:"get"})}function o(t,e){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t,method:"put",data:e})}function u(t,e){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t,method:"post",data:e})}function c(t){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t,method:"delete"})}function d(t){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t+"/failureDomains",method:"get"})}function m(t,e){return Object(a.a)({headers:{"x-pulsar-cluster":t},url:s+"/clusters/"+t+"/failureDomains/"+e,method:"get"})}function f(t,e,n){return Object(a.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:s+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:n})}function p(t,e,n){return Object(a.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:s+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:n})}function h(t,e){return Object(a.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:s+"/clusters/"+t+"/failureDomains/"+e,method:"post"})}},"3R6x":function(t,e,n){"use strict";var a=n("bdDI");n.n(a).a},"8Bk9":function(t,e,n){"use strict";n.r(e);var a=n("P2sY"),s=n.n(a),i=n("EHAl"),l=n("2Ayc"),r=n("Yfch"),o=n("7Qib"),u=n("iXUw"),c={cluster:""},d={name:"Tenants",data:function(){return{postForm:s()({},c),clusterListOptions:[],tableKey:0,list:null,localList:[],searchList:[],total:0,listLoading:!0,listQuery:{tenant:"",page:1,limit:10},form:{tenant:"",clusters:[],dynamicRoles:[]},dialogFormVisible:!1,dialogStatus:"",textMap:{create:this.$i18n.t("tenant.newTenant"),delete:this.$i18n.t("tenant.deleteTenant")},rules:{tenant:[{required:!0,message:this.$i18n.t("tenant.tenantIsRequired"),trigger:"blur"}],clusters:[{required:!0,message:this.$i18n.t("tenant.clusterIsRequired"),trigger:"blur"}]},inputVisible:!1,inputValue:"",deleteTenantMessage:this.$i18n.t("tenant.deleteTenantMessage")}},created:function(){this.getTenants()},methods:{getTenants:function(){var t=this;this.localList.length>0?setTimeout(function(){t.localPaging()},0):(this.listLoading=!0,Object(i.b)().then(function(e){for(var n=0;n<e.data.total;n++){var a="",s="";e.data.data[n].allowedClusters.length>0&&(a=e.data.data[n].allowedClusters),e.data.data[n].adminRoles.length>0&&(s=e.data.data[n].adminRoles);var i=[];""!==s&&(i=s.split(","));var l=[];""!==a&&(l=a.split(","));var r={tenant:e.data.data[n].tenant,namespace:e.data.data[n].namespaces,allowedClusters:l,adminRoles:i,inMsg:Object(u.numberFormatter)(0,2),outMsg:Object(u.numberFormatter)(0,2),inBytes:Object(o.a)(0),outBytes:Object(o.a)(0),storageSize:Object(o.a)(0,0)};e.data.data[n].hasOwnProperty("inMsg")&&(r.inMsg=Object(u.numberFormatter)(e.data.data[n].inMsg,2),r.outMsg=Object(u.numberFormatter)(e.data.data[n].outMsg,2),r.inBytes=Object(u.numberFormatter)(e.data.data[n].inBytes),r.outBytes=Object(u.numberFormatter)(e.data.data[n].outBytes),r.storageSize=Object(u.numberFormatter)(e.data.data[n].storageSize,2)),t.localList.push(r)}t.total=e.data.total,t.listQuery.page=e.data.pageNum,t.listQuery.limit=e.data.pageSize,t.list=t.localList.slice((t.listQuery.page-1)*t.listQuery.limit,t.listQuery.limit*t.listQuery.page),setTimeout(function(){t.listLoading=!1},1500)}))},localPaging:function(){if(this.listLoading=!0,Object(r.a)(this.listQuery.tenant))this.total=this.localList.length,this.list=this.localList.slice((this.listQuery.page-1)*this.listQuery.limit,this.listQuery.limit*this.listQuery.page);else{this.searchList=[];for(var t=0;t<this.localList.length;t++)-1!==this.localList[t].tenant.indexOf(this.listQuery.tenant)&&this.searchList.push(this.localList[t]);this.total=this.searchList.length,this.list=this.searchList.slice((this.listQuery.page-1)*this.listQuery.limit,this.listQuery.limit*this.listQuery.page)}this.listLoading=!1},handleFilter:function(){this.getTenants()},resetForm:function(){this.form={tenant:"",adminRoles:"",allowedClusters:"",clusters:[]}},handleOptions:function(){var t=this;this.$refs.form.validate(function(e){if(e)switch(t.dialogStatus){case"create":t.createData();break;case"delete":t.deleteData()}})},handleCreate:function(){var t=this;this.resetForm(),this.dialogStatus="create",this.dialogFormVisible=!0,this.form.clusters=[],this.clusterListOptions=[],this.form.dynamicRoles=[],Object(l.e)(this.listQuery).then(function(e){for(var n=0;n<e.data.data.length;n++)t.clusterListOptions.push({value:e.data.data[n].cluster,label:e.data.data[n].cluster})}),this.$nextTick(function(){t.$refs.form.clearValidate()})},createData:function(){var t=this;this.$refs.form.validate(function(e){if(e){var n={allowedClusters:t.form.clusters,adminRoles:t.form.dynamicRoles};Object(i.d)(t.form.tenant,n).then(function(e){t.form.adminRoles="empty",t.form.allowedClusters="empty",t.localList=[],t.getTenants(),t.dialogFormVisible=!1,t.$notify({title:"success",message:t.$i18n.t("tenant.createTenantSuccessNotification"),type:"success",duration:2e3})})}})},handleDelete:function(t){this.dialogStatus="delete",this.dialogFormVisible=!0,this.form.tenant=t.tenant},deleteData:function(){var t=this;Object(i.a)(this.form.tenant).then(function(e){t.$notify({title:"success",message:t.$i18n.t("tenant.deleteTenantSuccessNotification"),type:"success",duration:2e3}),t.dialogFormVisible=!1,t.localList=[],t.getTenants()})},handleClose:function(t){this.form.dynamicRoles.splice(this.form.dynamicRoles.indexOf(t),1)},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;if(t){if(this.form.dynamicRoles.indexOf(this.inputValue)>=0)return void this.$notify({title:"error",message:this.$i18n.t("tenant.roleAlreadyExists"),type:"error",duration:2e3});this.form.dynamicRoles.push(t)}this.inputVisible=!1,this.inputValue=""}}},m=(n("3R6x"),n("KHd+")),f=Object(m.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:t.$t("tenant.searchTenant")},nativeOn:{keyup:function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.listQuery.tenant,callback:function(e){t.$set(t.listQuery,"tenant",e)},expression:"listQuery.tenant"}}),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}}),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("tenant.newTenant")))])],1),t._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:t.$t("tenant.name"),"min-width":"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"link-type",attrs:{to:"/management/tenants/tenantInfo/"+e.row.tenant+"?tab=namespaces"}},[n("span",[t._v(t._s(e.row.tenant))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("namespace.namespaceNumber"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{staticClass:"link-type",attrs:{to:"/management/tenants/tenantInfo/"+e.row.tenant+"?tab=namespaces"}},[n("span",[t._v(t._s(e.row.namespace))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("tenant.allowedClustersLabel"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.allowedClusters,function(e){return n("span",{key:e,staticClass:"list-el-tag"},[t._v("\n              "+t._s(e)+"\n            ")])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("tenant.adminRolesLabel"),align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.adminRoles,function(e){return n("el-tag",{key:e,staticClass:"list-el-tag",attrs:{effect:"dark"}},[t._v("\n              "+t._s(e)+"\n            ")])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.inMsg"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-download",staticStyle:{"margin-right":"2px"}}),n("span",[t._v(t._s(e.row.inMsg))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.outMsg"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-upload2",staticStyle:{"margin-right":"2px"}}),n("span",[t._v(t._s(e.row.outMsg))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.inBytes"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-download",staticStyle:{"margin-right":"2px"}}),n("span",[t._v(t._s(e.row.inBytes))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.outBytes"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-upload2",staticStyle:{"margin-right":"2px"}}),n("span",[t._v(t._s(e.row.outBytes))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("common.storageSize"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.storageSize))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("table.actions"),align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:"/management/tenants/tenantInfo/"+e.row.tenant}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v(t._s(t.$t("table.edit")))])],1),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v(t._s(t.$t("table.delete")))])]}}])})],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-position":"top"}},["create"===t.dialogStatus?n("el-form-item",{attrs:{label:t.$t("table.tenant"),prop:"tenant"}},[n("el-input",{attrs:{placeholder:t.$t("tenant.selectTenantMessage")},model:{value:t.form.tenant,callback:function(e){t.$set(t.form,"tenant",e)},expression:"form.tenant"}})],1):t._e(),t._v(" "),"create"===t.dialogStatus?n("el-form-item",{attrs:{label:t.$t("tenant.allowedClustersLabel"),prop:"clusters"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("cluster.selectClusterMessage"),multiple:""},model:{value:t.form.clusters,callback:function(e){t.$set(t.form,"clusters",e)},expression:"form.clusters"}},t._l(t.clusterListOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1):t._e(),t._v(" "),"create"===t.dialogStatus?n("el-form-item",{attrs:{label:t.$t("tenant.adminRolesLabel"),prop:"roles"}},[t._l(t.form.dynamicRoles,function(e){return n("el-tag",{key:e,attrs:{"disable-transitions":!1,closable:""},on:{close:function(n){return t.handleClose(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])}),t._v(" "),t.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},nativeOn:{keyup:function(e){return"keyCode"in e&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Role")])],2):t._e(),t._v(" "),"delete"===t.dialogStatus?n("el-form-item",[n("h4",[t._v(t._s(t.deleteTenantMessage))])]):t._e(),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleOptions()}}},[t._v(t._s(t.$t("table.confirm")))]),t._v(" "),n("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))])],1)],1)],1)],1)},[],!1,null,null,null);f.options.__file="index.vue";e.default=f.exports},EHAl:function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"c",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"e",function(){return u}),n.d(e,"a",function(){return c});var a=n("t3Un"),s="/pulsar-manager/admin/v2",i="/admin/v2";function l(){return Object(a.a)({url:s+"/tenants",method:"get"})}function r(t){return Object(a.a)({url:i+"/tenants/"+t,method:"get"})}function o(t,e){return Object(a.a)({headers:{"Content-Type":"application/json"},url:i+"/tenants/"+t,method:"put",data:e})}function u(t,e){return Object(a.a)({headers:{"Content-Type":"application/json"},url:i+"/tenants/"+t,method:"post",data:e})}function c(t){return Object(a.a)({url:i+"/tenants/"+t,method:"delete"})}},Yfch:function(t,e,n){"use strict";function a(t){return void 0===t||null===t||""===t}function s(t,e){return function(n,a,s){if(a&&0!==a.length||!e)try{if(new URL(a).protocol!==t)return void s(new Error("Please input an `"+t+"` service URL"));s()}catch(t){s(new Error("Please input a valid service URL"))}else s()}}function i(t){var e=t.charAt(t.length-1),n=t.substring(0,t.length-1);switch(e){case"k":case"K":return 1024*Number(n);case"m":case"M":return 1024*Number(n)*1024;case"g":case"G":return 1024*Number(n)*1024*1024;case"t":case"T":return 1024*Number(n)*1024*1024*1024;default:return Number(t)}}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return i})},bdDI:function(t,e,n){}}]);