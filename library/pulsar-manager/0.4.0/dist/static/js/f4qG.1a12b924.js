(window.webpackJsonp=window.webpackJsonp||[]).push([["f4qG"],{f4qG:function(e,t,n){"use strict";n.r(t);var r=n("UvB6"),o=n("i9gG"),i=n("Q2AE"),a={name:"EnvironmentInfo",data:function(){return{environmentList:[],environmentTableKey:0,environmentListLoading:!1,textMap:{create:this.$i18n.t("env.newEnvDialogCaption"),delete:this.$i18n.t("env.deleteEnvDialogCaption"),update:this.$i18n.t("env.updateEnvDialogCaption")},dialogFormVisible:!1,dialogStatus:"",form:{environment:"",broker:"",bookie:""},temp:{name:"",broker:"",bookie:""},superUser:!1,roles:[],rules:{environment:[{required:!0,message:this.$i18n.t("env.envNameIsRequired"),trigger:"blur"}],broker:[{required:!0,message:this.$i18n.t("env.serviceUrlIsRequired"),trigger:"blur"}],bookie:[{required:!0,message:this.$i18n.t("env.bookieUrlIsRequired"),trigger:"blur"}]}}},created:function(){this.getEnvironments(),this.roles=i.a.getters&&i.a.getters.roles,this.roles.includes("super")?this.superUser=!0:this.superUser=!1},methods:{getEnvironments:function(){var e=this;Object(r.b)().then(function(t){if(t.data){e.environmentList=[];for(var n=0;n<t.data.data.length;n++)e.environmentList.push({environment:t.data.data[n].name,broker:t.data.data[n].broker,bookie:t.data.data[n].bookie})}})},handleCreateEnvironment:function(){this.form.environment="",this.form.broker="",this.dialogFormVisible=!0,this.dialogStatus="create"},handleDeleteEnvironment:function(e){this.temp.name=e.environment,this.temp.broker=e.broker,this.dialogFormVisible=!0,this.dialogStatus="delete"},handleUpdateEnvironment:function(e){this.form.environment=e.environment,this.form.broker=e.broker,this.form.bookie=e.bookie,this.dialogFormVisible=!0,this.dialogStatus="update"},handleOptions:function(){var e=this;this.$refs.form.validate(function(t){if(t)switch(e.dialogStatus){case"create":e.createEnvironment();break;case"delete":e.deleteEnvironment();break;case"update":e.updateEnvironment()}})},createEnvironment:function(){var e=this,t={name:this.form.environment,broker:this.form.broker,bookie:this.form.bookie};Object(r.c)(t).then(function(t){t.data&&(t.data.hasOwnProperty("error")?e.$notify({title:"error",message:t.data.error,type:"error",duration:2e3}):(e.$notify({title:"success",message:e.$i18n.t("env.addEnvSuccessNotification"),type:"success",duration:2e3}),e.dialogFormVisible=!1,e.getEnvironments()))})},deleteEnvironment:function(){var e=this,t={name:this.temp.name,broker:this.temp.broker};Object(r.a)(t).then(function(t){t.data&&(t.data.hasOwnProperty("error")?e.$notify({title:"error",message:t.data.error,type:"error",duration:2e3}):(e.$notify({title:"success",message:e.$i18n.t("env.deleteEnvSuccessNotification"),type:"success",duration:2e3}),e.getEnvironments(),e.dialogFormVisible=!1))})},updateEnvironment:function(){var e=this,t={name:this.form.environment,broker:this.form.broker,bookie:this.form.bookie};Object(r.d)(t).then(function(t){t.data&&(t.data.hasOwnProperty("error")?e.$notify({title:"error",message:t.data.error,type:"error",duration:2e3}):(e.$notify({title:"success",message:e.$i18n.t("env.updateEnvSuccessNotification"),type:"success",duration:2e3}),e.getEnvironments(),e.dialogFormVisible=!1))})},handleSetEnvironment:function(e){Object(o.c)(e),this.roles.includes("super")?this.$router.push({path:"/management/tenants"}):this.$router.push({path:"/management/admin/tenants/tenantInfo"})}}},s=n("KHd+"),l=Object(s.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[e.superUser?n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreateEnvironment}},[e._v(e._s(e.$t("env.buttonNewEnv")))]):e._e(),e._v(" "),n("el-row",{attrs:{gutter:24}},[n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{xs:{span:24},sm:{span:24},md:{span:24},lg:{span:24},xl:{span:24}}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.environmentListLoading,expression:"environmentListLoading"}],key:e.environmentTableKey,staticStyle:{width:"100%"},attrs:{data:e.environmentList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:e.$t("env.colHeadingEnv"),"min-width":"50px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{staticClass:"link-type",attrs:{to:"#"},nativeOn:{click:function(n){return e.handleSetEnvironment(t.row.environment)}}},[n("span",[e._v(e._s(t.row.environment))])])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("env.colHeadingServiceUrl"),align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.broker))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("env.colHeadingBookieUrl"),align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.bookie))])]}}])}),e._v(" "),e.superUser?n("el-table-column",{attrs:{label:e.$t("table.actions"),align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.handleUpdateEnvironment(t.row)}}},[e._v(e._s(e.$t("table.edit")))]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDeleteEnvironment(t.row)}}},[e._v(e._s(e.$t("table.delete")))])]}}])}):e._e()],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-position":"top"}},["create"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.newEnvNameLabel"),prop:"environment"}},[n("el-input",{attrs:{placeholder:e.$t("env.newEnvNamePlaceHolder")},model:{value:e.form.environment,callback:function(t){e.$set(e.form,"environment",t)},expression:"form.environment"}})],1):e._e(),e._v(" "),"create"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.newEnvServiceUrlLabel"),prop:"broker"}},[n("el-input",{attrs:{placeholder:e.$t("env.newEnvServiceUrlPlaceHolder")},model:{value:e.form.broker,callback:function(t){e.$set(e.form,"broker",t)},expression:"form.broker"}})],1):e._e(),e._v(" "),"create"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.newEnvBookieUrlLabel"),prop:"bookie"}},[n("el-input",{attrs:{placeholder:e.$t("env.newEnvBookieUrlPlaceHolder")},model:{value:e.form.bookie,callback:function(t){e.$set(e.form,"bookie",t)},expression:"form.bookie"}})],1):e._e(),e._v(" "),"update"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.updateEnvNameLabel")}},[n("el-tag",{attrs:{type:"primary",size:"medium"}},[e._v(e._s(e.form.environment))])],1):e._e(),e._v(" "),"update"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.updateEnvServiceUrlLabel"),prop:"broker"}},[n("el-input",{attrs:{placeholder:e.$t("env.updateEnvServiceUrlPlaceHolder")},model:{value:e.form.broker,callback:function(t){e.$set(e.form,"broker",t)},expression:"form.broker"}})],1):e._e(),e._v(" "),"update"===e.dialogStatus?n("el-form-item",{attrs:{label:e.$t("env.updateEnvBookieUrlLabel"),prop:"bookie"}},[n("el-input",{attrs:{placeholder:e.$t("env.updateEnvBookieUrlPlaceHolder")},model:{value:e.form.bookie,callback:function(t){e.$set(e.form,"bookie",t)},expression:"form.bookie"}})],1):e._e(),e._v(" "),"delete"===e.dialogStatus?n("el-form-item",[n("h4",[e._v(e._s(e.$t("env.deleteEnvDialogText")))])]):e._e(),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleOptions()}}},[e._v(e._s(e.$t("table.confirm")))]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(e._s(e.$t("table.cancel")))])],1)],1)],1)],1)},[],!1,null,null,null);l.options.__file="index.vue";t.default=l.exports}}]);