(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1cb5"],{"2Ayc":function(t,e,r){"use strict";r.d(e,"e",function(){return i}),r.d(e,"d",function(){return o}),r.d(e,"h",function(){return l}),r.d(e,"i",function(){return u}),r.d(e,"b",function(){return c}),r.d(e,"g",function(){return d}),r.d(e,"f",function(){return m}),r.d(e,"a",function(){return f}),r.d(e,"j",function(){return p}),r.d(e,"c",function(){return h});var s=r("t3Un"),n="/admin/v2",a="/pulsar-manager/admin/v2";function i(t){return Object(s.a)({url:a+"/clusters",method:"get",params:{query:t}})}function o(t){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t,method:"get"})}function l(t,e){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t,method:"put",data:e})}function u(t,e){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t,method:"post",data:e})}function c(t){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t,method:"delete"})}function d(t){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t+"/failureDomains",method:"get"})}function m(t,e){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/clusters/"+t+"/failureDomains/"+e,method:"get"})}function f(t,e,r){return Object(s.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:n+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:r})}function p(t,e,r){return Object(s.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:n+"/clusters/"+t+"/failureDomains/"+e,method:"post",data:r})}function h(t,e){return Object(s.a)({headers:{"Content-Type":"application/json","x-pulsar-cluster":t},url:n+"/clusters/"+t+"/failureDomains/"+e,method:"post"})}},NrcP:function(t,e,r){},WEE2:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"b",function(){return o}),r.d(e,"d",function(){return l}),r.d(e,"c",function(){return u});var s=r("t3Un"),n="/admin/v2",a="/pulsar-manager/admin/v2";function i(t){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:a+"/brokers/"+t,method:"get"})}function o(t){return Object(s.a)({headers:{"x-pulsar-cluster":t},url:n+"/brokers/"+t,method:"get"})}function l(t){return Object(s.a)({headers:{"x-pulsar-broker":t},url:n+"/brokers/configuration/runtime",method:"get"})}function u(t){return Object(s.a)({headers:{"x-pulsar-broker":t},url:n+"/brokers/health",method:"get"})}},YRgR:function(t,e,r){"use strict";r.r(e);var s=r("P2sY"),n=r.n(s),a=r("2Ayc"),i=r("WEE2"),o={cluster:"",failureDomainName:""},l={name:"FailureDomainInfo",data:function(){return{postForm:n()({},o),clustersListOptions:[],brokersContent:this.$i18n.t("broker.brokerContent"),brokerValue:[],brokerOptions:[],failureDomainListOptions:[],firstInit:!1,textMap:{delete:this.$i18n.t("fd.deleteFd")},dialogStatus:"",dialogFormVisible:!1,deleteFdMessage:this.$i18n.t("fd.deleteFdMessage")}},created:function(){this.postForm.cluster=this.$route.params&&this.$route.params.cluster,this.postForm.failureDomainName=this.$route.params&&this.$route.params.failureDomainName,this.firstInit=!0,this.getClusterList(),this.initBrokerValue(),this.initSelectBrokers(),this.getFailureDomainsList()},methods:{initBrokerValue:function(){var t=this;Object(a.f)(this.postForm.cluster,this.postForm.failureDomainName).then(function(e){e.data&&(t.brokerValue=e.data.brokers)})},getClusterList:function(){var t=this;Object(a.e)(this.listQuery).then(function(e){if(e.data)for(var r=0;r<e.data.data.length;r++)t.clustersListOptions.push(e.data.data[r].cluster)})},getFailureDomainsList:function(){var t=this;Object(a.g)(this.postForm.cluster).then(function(e){if(e.data)for(var r in t.firstInit?t.firstInit=!1:t.postForm.failureDomainName="",t.failureDomainListOptions=[],e.data)t.failureDomainListOptions.push(r)})},initSelectBrokers:function(){var t=this;Object(i.b)(this.postForm.cluster).then(function(e){for(var r=0;r<e.data.length;r++)t.brokerOptions.push({value:e.data[r],label:e.data[r]})})},handleSelectBrokers:function(){var t=this,e={brokers:this.brokerValue};Object(a.j)(this.postForm.cluster,this.postForm.failureDomainName,e).then(function(e){t.$notify({title:"success",message:t.$i18n.t("fd.updateFdSuccessNotification"),type:"success",duration:3e3})})},getFailureDomainInfo:function(){this.$router.push({path:"/management/clusters/"+this.postForm.cluster+"/"+this.postForm.failureDomainName+"/failureDomainName"})},handleDelete:function(){this.dialogFormVisible=!0,this.dialogStatus="delete"},deleteDomain:function(){var t=this;Object(a.c)(this.postForm.cluster,this.postForm.failureDomainName).then(function(e){t.$notify({title:"success",message:t.$i18n.t("fd.deleteFdSuccessNotification"),type:"success",duration:3e3}),t.dialogFormVisible=!1,t.$router.push({path:"/management/clusters/"+t.postForm.cluster+"/cluster?tab=failureDomains"})})}}},u=(r("wz64"),r("KHd+")),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"createPost-container"},[r("el-form",{staticClass:"form-container",attrs:{inline:!0,model:t.postForm}},[r("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:t.$t("cluster.label")}},[r("el-select",{attrs:{placeholder:"select cluster"},on:{change:function(e){return t.getFailureDomainsList()}},model:{value:t.postForm.cluster,callback:function(e){t.$set(t.postForm,"cluster",e)},expression:"postForm.cluster"}},t._l(t.clustersListOptions,function(t,e){return r("el-option",{key:t+e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),r("el-form-item",{staticClass:"postInfo-container-item",attrs:{label:t.$t("fd.label")}},[r("el-select",{attrs:{placeholder:"select domain"},on:{change:function(e){return t.getFailureDomainInfo()}},model:{value:t.postForm.failureDomainName,callback:function(e){t.$set(t.postForm,"failureDomainName",e)},expression:"postForm.failureDomainName"}},t._l(t.failureDomainListOptions,function(t,e){return r("el-option",{key:t+e,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),r("h3",[t._v(t._s(t.$t("fd.label")))]),t._v(" "),r("h4",[t._v(t._s(t.$t("fd.brokerList"))+"\n    "),r("el-tooltip",{staticClass:"item",attrs:{content:t.brokersContent,effect:"dark",placement:"top"}},[r("i",{staticClass:"el-icon-info"})])],1),t._v(" "),r("el-form",[r("el-form-item",[r("el-select",{staticStyle:{width:"500px","margin-top":"20px"},attrs:{placeholder:t.$t("fd.selectBrokers"),multiple:""},model:{value:t.brokerValue,callback:function(e){t.brokerValue=e},expression:"brokerValue"}},t._l(t.brokerOptions,function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),r("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return t.handleSelectBrokers()}}},[t._v(t._s(t.$t("fd.updateFd")))])],1),t._v(" "),r("h4",{staticStyle:{color:"#E57470"}},[t._v(t._s(t.$t("common.dangerZone")))]),t._v(" "),r("hr",{staticClass:"danger-line"}),t._v(" "),r("el-button",{staticClass:"button",attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v(t._s(t.$t("fd.deleteFd")))]),t._v(" "),r("el-dialog",{attrs:{visible:t.dialogFormVisible,title:t.textMap[t.dialogStatus],width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{attrs:{"label-position":"top"}},["delete"===t.dialogStatus?r("div",[r("el-form-item",[r("h4",[t._v(t._s(t.deleteFdMessage))])]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.deleteDomain()}}},[t._v(t._s(t.$t("table.confirm")))]),t._v(" "),r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))])],1)],1):t._e()])],1)],1)},[],!1,null,null,null);c.options.__file="failureDomain.vue";e.default=c.exports},wz64:function(t,e,r){"use strict";var s=r("NrcP");r.n(s).a}}]);