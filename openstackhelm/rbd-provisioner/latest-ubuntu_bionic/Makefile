# This file is generated by the template.

REGISTRY?=cr.loongnix.cn
ORGANIZATION?=openstackhelm
REPOSITORY?=rbd-provisioner
TAG?=latest-ubuntu_bionic
BASEIMAGE?=$(baseimage)

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)


default: image

download:
	wget "https://github.com/Loongson-Cloud-Community/external-storage/releases/download/rbd-provisioner-v2.1.1-k8s1.11/rbd-provisioner"

image: download
	docker build \
		-t $(IMAGE) \
		--build-arg baseimg="$(BASEIMAGE)" \
		.	

push:
	docker push $(IMAGE)

clean:
	rm -rf rbd-provisioner
