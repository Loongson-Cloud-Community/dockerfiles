# This file is generated by the template.

REGISTRY?=cr.loongnix.cn
ORGANIZATION?=valkey
REPOSITORY?=valkey
TAG?=8.0
LATEST?=false

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)

default: image
image: 
	docker build --build-arg https_proxy=$(https_proxy) -t $(IMAGE)-debian .

push: image
	docker push $(IMAGE)-debian
	#latest image
	@if [ $(LATEST) == "true" ]; \
		then \
		docker tag $(IMAGE) $(LATEST_IMAGE); \
		docker push $(LATEST_IMAGE); \
	fi
