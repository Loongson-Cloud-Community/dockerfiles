# This file is generated by the template.

REGISTRY?=cr.loongnix.cn
ORGANIZATION?=minio
REPOSITORY?=minio

MINIO_TAG:=RELEASE.2023-12-20T01-00-02Z
MC_TAG:=RELEASE.2023-12-20T07-14-22Z

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(MINIO_TAG)

default: image

image:src/minio src/mc
	@docker build \
		--build-arg MINIO_TAG=$(MINIO_TAG) \
		--build-arg MC_TAG=$(MC_TAG) \
		-t $(IMAGE) \
		.
src/minio:
	@git clone -b $(MINIO_TAG) https://github.com/minio/minio.git  $@
src/mc:
	@git clone -b $(MC_TAG) https://github.com/minio/mc.git  $@

push:
	@docker push $(IMAGE)
clean:
	@rm -rf src
