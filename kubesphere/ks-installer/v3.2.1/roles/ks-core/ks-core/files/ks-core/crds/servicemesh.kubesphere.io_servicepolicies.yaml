
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: (devel)
  creationTimestamp: null
  name: servicepolicies.servicemesh.kubesphere.io
spec:
  group: servicemesh.kubesphere.io
  names:
    kind: ServicePolicy
    listKind: ServicePolicyList
    plural: servicepolicies
    singular: servicepolicy
  scope: Namespaced
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: ServicePolicy is the Schema for the servicepolicies API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: ServicePolicySpec defines the desired state of ServicePolicy
            properties:
              selector:
                description: Label selector for destination rules.
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements. The requirements are ANDed.
                    items:
                      description: A label selector requirement is a selector that contains values, a key, and an operator that relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies to.
                          type: string
                        operator:
                          description: operator represents a key's relationship to a set of values. Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: values is an array of string values. If the operator is In or NotIn, the values array must be non-empty. If the operator is Exists or DoesNotExist, the values array must be empty. This array is replaced during a strategic merge patch.
                          items:
                            type: string
                          type: array
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels map is equivalent to an element of matchExpressions, whose key field is "key", the operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
              template:
                description: Template used to create a destination rule
                properties:
                  metadata:
                    description: Metadata of the virtual services created from this template
                    type: object
                  spec:
                    description: 'Configuration affecting load balancing, outlier detection,
                      etc. See more details at: https://istio.io/docs/reference/config/networking/destination-rule.html'
                    properties:
                      exportTo:
                        description: A list of namespaces to which this destination rule is
                          exported.
                        items:
                          format: string
                          type: string
                        type: array
                      host:
                        description: The name of a service from the service registry.
                        format: string
                        type: string
                      subsets:
                        items:
                          properties:
                            labels:
                              additionalProperties:
                                format: string
                                type: string
                              type: object
                            name:
                              description: Name of the subset.
                              format: string
                              type: string
                            trafficPolicy:
                              description: Traffic policies that apply to this subset.
                              properties:
                                connectionPool:
                                  properties:
                                    http:
                                      description: HTTP connection pool settings.
                                      properties:
                                        h2UpgradePolicy:
                                          description: Specify if http1.1 connection should
                                            be upgraded to http2 for the associated destination.
                                          enum:
                                            - DEFAULT
                                            - DO_NOT_UPGRADE
                                            - UPGRADE
                                          type: string
                                        http1MaxPendingRequests:
                                          description: Maximum number of pending HTTP requests
                                            to a destination.
                                          format: int32
                                          type: integer
                                        http2MaxRequests:
                                          description: Maximum number of requests to a backend.
                                          format: int32
                                          type: integer
                                        idleTimeout:
                                          description: The idle timeout for upstream connection
                                            pool connections.
                                          type: string
                                        maxRequestsPerConnection:
                                          description: Maximum number of requests per connection
                                            to a backend.
                                          format: int32
                                          type: integer
                                        maxRetries:
                                          format: int32
                                          type: integer
                                        useClientProtocol:
                                          description: If set to true, client protocol will
                                            be preserved while initiating connection to backend.
                                          type: boolean
                                      type: object
                                    tcp:
                                      description: Settings common to both HTTP and TCP upstream
                                        connections.
                                      properties:
                                        connectTimeout:
                                          description: TCP connection timeout.
                                          type: string
                                        maxConnections:
                                          description: Maximum number of HTTP1 /TCP connections
                                            to a destination host.
                                          format: int32
                                          type: integer
                                        tcpKeepalive:
                                          description: If set then set SO_KEEPALIVE on the
                                            socket to enable TCP Keepalives.
                                          properties:
                                            interval:
                                              description: The time duration between keep-alive
                                                probes.
                                              type: string
                                            probes:
                                              type: integer
                                            time:
                                              type: string
                                          type: object
                                      type: object
                                  type: object
                                loadBalancer:
                                  description: Settings controlling the load balancer algorithms.
                                  oneOf:
                                    - not:
                                        anyOf:
                                          - required:
                                              - simple
                                          - properties:
                                              consistentHash:
                                                oneOf:
                                                  - not:
                                                      anyOf:
                                                        - required:
                                                            - httpHeaderName
                                                        - required:
                                                            - httpCookie
                                                        - required:
                                                            - useSourceIp
                                                        - required:
                                                            - httpQueryParameterName
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            required:
                                              - consistentHash
                                    - required:
                                        - simple
                                    - properties:
                                        consistentHash:
                                          oneOf:
                                            - not:
                                                anyOf:
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            - required:
                                                - httpHeaderName
                                            - required:
                                                - httpCookie
                                            - required:
                                                - useSourceIp
                                            - required:
                                                - httpQueryParameterName
                                      required:
                                        - consistentHash
                                  properties:
                                    consistentHash:
                                      properties:
                                        httpCookie:
                                          description: Hash based on HTTP cookie.
                                          properties:
                                            name:
                                              description: Name of the cookie.
                                              format: string
                                              type: string
                                            path:
                                              description: Path to set for the cookie.
                                              format: string
                                              type: string
                                            ttl:
                                              description: Lifetime of the cookie.
                                              type: string
                                          type: object
                                        httpHeaderName:
                                          description: Hash based on a specific HTTP header.
                                          format: string
                                          type: string
                                        httpQueryParameterName:
                                          description: Hash based on a specific HTTP query
                                            parameter.
                                          format: string
                                          type: string
                                        minimumRingSize:
                                          type: integer
                                        useSourceIp:
                                          description: Hash based on the source IP address.
                                          type: boolean
                                      type: object
                                    localityLbSetting:
                                      properties:
                                        distribute:
                                          description: 'Optional: only one of distribute or
                                            failover can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating locality, '/' separated,
                                                  e.g.
                                                format: string
                                                type: string
                                              to:
                                                additionalProperties:
                                                  type: integer
                                                description: Map of upstream localities to
                                                  traffic distribution weights.
                                                type: object
                                            type: object
                                          type: array
                                        enabled:
                                          description: enable locality load balancing, this
                                            is DestinationRule-level and will override mesh
                                            wide settings in entirety.
                                          nullable: true
                                          type: boolean
                                        failover:
                                          description: 'Optional: only failover or distribute
                                            can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating region.
                                                format: string
                                                type: string
                                              to:
                                                format: string
                                                type: string
                                            type: object
                                          type: array
                                      type: object
                                    simple:
                                      enum:
                                        - ROUND_ROBIN
                                        - LEAST_CONN
                                        - RANDOM
                                        - PASSTHROUGH
                                      type: string
                                  type: object
                                outlierDetection:
                                  properties:
                                    baseEjectionTime:
                                      description: Minimum ejection duration.
                                      type: string
                                    consecutive5xxErrors:
                                      description: Number of 5xx errors before a host is ejected
                                        from the connection pool.
                                      nullable: true
                                      type: integer
                                    consecutiveErrors:
                                      format: int32
                                      type: integer
                                    consecutiveGatewayErrors:
                                      description: Number of gateway errors before a host
                                        is ejected from the connection pool.
                                      nullable: true
                                      type: integer
                                    interval:
                                      description: Time interval between ejection sweep analysis.
                                      type: string
                                    maxEjectionPercent:
                                      format: int32
                                      type: integer
                                    minHealthPercent:
                                      format: int32
                                      type: integer
                                  type: object
                                portLevelSettings:
                                  description: Traffic policies specific to individual ports.
                                  items:
                                    properties:
                                      connectionPool:
                                        properties:
                                          http:
                                            description: HTTP connection pool settings.
                                            properties:
                                              h2UpgradePolicy:
                                                description: Specify if http1.1 connection
                                                  should be upgraded to http2 for the associated
                                                  destination.
                                                enum:
                                                  - DEFAULT
                                                  - DO_NOT_UPGRADE
                                                  - UPGRADE
                                                type: string
                                              http1MaxPendingRequests:
                                                description: Maximum number of pending HTTP
                                                  requests to a destination.
                                                format: int32
                                                type: integer
                                              http2MaxRequests:
                                                description: Maximum number of requests to
                                                  a backend.
                                                format: int32
                                                type: integer
                                              idleTimeout:
                                                description: The idle timeout for upstream
                                                  connection pool connections.
                                                type: string
                                              maxRequestsPerConnection:
                                                description: Maximum number of requests per
                                                  connection to a backend.
                                                format: int32
                                                type: integer
                                              maxRetries:
                                                format: int32
                                                type: integer
                                              useClientProtocol:
                                                description: If set to true, client protocol
                                                  will be preserved while initiating connection
                                                  to backend.
                                                type: boolean
                                            type: object
                                          tcp:
                                            description: Settings common to both HTTP and
                                              TCP upstream connections.
                                            properties:
                                              connectTimeout:
                                                description: TCP connection timeout.
                                                type: string
                                              maxConnections:
                                                description: Maximum number of HTTP1 /TCP
                                                  connections to a destination host.
                                                format: int32
                                                type: integer
                                              tcpKeepalive:
                                                description: If set then set SO_KEEPALIVE
                                                  on the socket to enable TCP Keepalives.
                                                properties:
                                                  interval:
                                                    description: The time duration between
                                                      keep-alive probes.
                                                    type: string
                                                  probes:
                                                    type: integer
                                                  time:
                                                    type: string
                                                type: object
                                            type: object
                                        type: object
                                      loadBalancer:
                                        description: Settings controlling the load balancer
                                          algorithms.
                                        oneOf:
                                          - not:
                                              anyOf:
                                                - required:
                                                    - simple
                                                - properties:
                                                    consistentHash:
                                                      oneOf:
                                                        - not:
                                                            anyOf:
                                                              - required:
                                                                  - httpHeaderName
                                                              - required:
                                                                  - httpCookie
                                                              - required:
                                                                  - useSourceIp
                                                              - required:
                                                                  - httpQueryParameterName
                                                        - required:
                                                            - httpHeaderName
                                                        - required:
                                                            - httpCookie
                                                        - required:
                                                            - useSourceIp
                                                        - required:
                                                            - httpQueryParameterName
                                                  required:
                                                    - consistentHash
                                          - required:
                                              - simple
                                          - properties:
                                              consistentHash:
                                                oneOf:
                                                  - not:
                                                      anyOf:
                                                        - required:
                                                            - httpHeaderName
                                                        - required:
                                                            - httpCookie
                                                        - required:
                                                            - useSourceIp
                                                        - required:
                                                            - httpQueryParameterName
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            required:
                                              - consistentHash
                                        properties:
                                          consistentHash:
                                            properties:
                                              httpCookie:
                                                description: Hash based on HTTP cookie.
                                                properties:
                                                  name:
                                                    description: Name of the cookie.
                                                    format: string
                                                    type: string
                                                  path:
                                                    description: Path to set for the cookie.
                                                    format: string
                                                    type: string
                                                  ttl:
                                                    description: Lifetime of the cookie.
                                                    type: string
                                                type: object
                                              httpHeaderName:
                                                description: Hash based on a specific HTTP
                                                  header.
                                                format: string
                                                type: string
                                              httpQueryParameterName:
                                                description: Hash based on a specific HTTP
                                                  query parameter.
                                                format: string
                                                type: string
                                              minimumRingSize:
                                                type: integer
                                              useSourceIp:
                                                description: Hash based on the source IP address.
                                                type: boolean
                                            type: object
                                          localityLbSetting:
                                            properties:
                                              distribute:
                                                description: 'Optional: only one of distribute
                                                  or failover can be set.'
                                                items:
                                                  properties:
                                                    from:
                                                      description: Originating locality, '/'
                                                        separated, e.g.
                                                      format: string
                                                      type: string
                                                    to:
                                                      additionalProperties:
                                                        type: integer
                                                      description: Map of upstream localities
                                                        to traffic distribution weights.
                                                      type: object
                                                  type: object
                                                type: array
                                              enabled:
                                                description: enable locality load balancing,
                                                  this is DestinationRule-level and will override
                                                  mesh wide settings in entirety.
                                                nullable: true
                                                type: boolean
                                              failover:
                                                description: 'Optional: only failover or distribute
                                                  can be set.'
                                                items:
                                                  properties:
                                                    from:
                                                      description: Originating region.
                                                      format: string
                                                      type: string
                                                    to:
                                                      format: string
                                                      type: string
                                                  type: object
                                                type: array
                                            type: object
                                          simple:
                                            enum:
                                              - ROUND_ROBIN
                                              - LEAST_CONN
                                              - RANDOM
                                              - PASSTHROUGH
                                            type: string
                                        type: object
                                      outlierDetection:
                                        properties:
                                          baseEjectionTime:
                                            description: Minimum ejection duration.
                                            type: string
                                          consecutive5xxErrors:
                                            description: Number of 5xx errors before a host
                                              is ejected from the connection pool.
                                            nullable: true
                                            type: integer
                                          consecutiveErrors:
                                            format: int32
                                            type: integer
                                          consecutiveGatewayErrors:
                                            description: Number of gateway errors before a
                                              host is ejected from the connection pool.
                                            nullable: true
                                            type: integer
                                          interval:
                                            description: Time interval between ejection sweep
                                              analysis.
                                            type: string
                                          maxEjectionPercent:
                                            format: int32
                                            type: integer
                                          minHealthPercent:
                                            format: int32
                                            type: integer
                                        type: object
                                      port:
                                        properties:
                                          number:
                                            type: integer
                                        type: object
                                      tls:
                                        description: TLS related settings for connections
                                          to the upstream service.
                                        properties:
                                          caCertificates:
                                            format: string
                                            type: string
                                          clientCertificate:
                                            description: REQUIRED if mode is `MUTUAL`.
                                            format: string
                                            type: string
                                          credentialName:
                                            format: string
                                            type: string
                                          mode:
                                            enum:
                                              - DISABLE
                                              - SIMPLE
                                              - MUTUAL
                                              - ISTIO_MUTUAL
                                            type: string
                                          privateKey:
                                            description: REQUIRED if mode is `MUTUAL`.
                                            format: string
                                            type: string
                                          sni:
                                            description: SNI string to present to the server
                                              during TLS handshake.
                                            format: string
                                            type: string
                                          subjectAltNames:
                                            items:
                                              format: string
                                              type: string
                                            type: array
                                        type: object
                                    type: object
                                  type: array
                                tls:
                                  description: TLS related settings for connections to the
                                    upstream service.
                                  properties:
                                    caCertificates:
                                      format: string
                                      type: string
                                    clientCertificate:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    credentialName:
                                      format: string
                                      type: string
                                    mode:
                                      enum:
                                        - DISABLE
                                        - SIMPLE
                                        - MUTUAL
                                        - ISTIO_MUTUAL
                                      type: string
                                    privateKey:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    sni:
                                      description: SNI string to present to the server during
                                        TLS handshake.
                                      format: string
                                      type: string
                                    subjectAltNames:
                                      items:
                                        format: string
                                        type: string
                                      type: array
                                  type: object
                              type: object
                          type: object
                        type: array
                      trafficPolicy:
                        properties:
                          connectionPool:
                            properties:
                              http:
                                description: HTTP connection pool settings.
                                properties:
                                  h2UpgradePolicy:
                                    description: Specify if http1.1 connection should be upgraded
                                      to http2 for the associated destination.
                                    enum:
                                      - DEFAULT
                                      - DO_NOT_UPGRADE
                                      - UPGRADE
                                    type: string
                                  http1MaxPendingRequests:
                                    description: Maximum number of pending HTTP requests to
                                      a destination.
                                    format: int32
                                    type: integer
                                  http2MaxRequests:
                                    description: Maximum number of requests to a backend.
                                    format: int32
                                    type: integer
                                  idleTimeout:
                                    description: The idle timeout for upstream connection
                                      pool connections.
                                    type: string
                                  maxRequestsPerConnection:
                                    description: Maximum number of requests per connection
                                      to a backend.
                                    format: int32
                                    type: integer
                                  maxRetries:
                                    format: int32
                                    type: integer
                                  useClientProtocol:
                                    description: If set to true, client protocol will be preserved
                                      while initiating connection to backend.
                                    type: boolean
                                type: object
                              tcp:
                                description: Settings common to both HTTP and TCP upstream
                                  connections.
                                properties:
                                  connectTimeout:
                                    description: TCP connection timeout.
                                    type: string
                                  maxConnections:
                                    description: Maximum number of HTTP1 /TCP connections
                                      to a destination host.
                                    format: int32
                                    type: integer
                                  tcpKeepalive:
                                    description: If set then set SO_KEEPALIVE on the socket
                                      to enable TCP Keepalives.
                                    properties:
                                      interval:
                                        description: The time duration between keep-alive
                                          probes.
                                        type: string
                                      probes:
                                        type: integer
                                      time:
                                        type: string
                                    type: object
                                type: object
                            type: object
                          loadBalancer:
                            description: Settings controlling the load balancer algorithms.
                            oneOf:
                              - not:
                                  anyOf:
                                    - required:
                                        - simple
                                    - properties:
                                        consistentHash:
                                          oneOf:
                                            - not:
                                                anyOf:
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            - required:
                                                - httpHeaderName
                                            - required:
                                                - httpCookie
                                            - required:
                                                - useSourceIp
                                            - required:
                                                - httpQueryParameterName
                                      required:
                                        - consistentHash
                              - required:
                                  - simple
                              - properties:
                                  consistentHash:
                                    oneOf:
                                      - not:
                                          anyOf:
                                            - required:
                                                - httpHeaderName
                                            - required:
                                                - httpCookie
                                            - required:
                                                - useSourceIp
                                            - required:
                                                - httpQueryParameterName
                                      - required:
                                          - httpHeaderName
                                      - required:
                                          - httpCookie
                                      - required:
                                          - useSourceIp
                                      - required:
                                          - httpQueryParameterName
                                required:
                                  - consistentHash
                            properties:
                              consistentHash:
                                properties:
                                  httpCookie:
                                    description: Hash based on HTTP cookie.
                                    properties:
                                      name:
                                        description: Name of the cookie.
                                        format: string
                                        type: string
                                      path:
                                        description: Path to set for the cookie.
                                        format: string
                                        type: string
                                      ttl:
                                        description: Lifetime of the cookie.
                                        type: string
                                    type: object
                                  httpHeaderName:
                                    description: Hash based on a specific HTTP header.
                                    format: string
                                    type: string
                                  httpQueryParameterName:
                                    description: Hash based on a specific HTTP query parameter.
                                    format: string
                                    type: string
                                  minimumRingSize:
                                    type: integer
                                  useSourceIp:
                                    description: Hash based on the source IP address.
                                    type: boolean
                                type: object
                              localityLbSetting:
                                properties:
                                  distribute:
                                    description: 'Optional: only one of distribute or failover
                                      can be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating locality, '/' separated,
                                            e.g.
                                          format: string
                                          type: string
                                        to:
                                          additionalProperties:
                                            type: integer
                                          description: Map of upstream localities to traffic
                                            distribution weights.
                                          type: object
                                      type: object
                                    type: array
                                  enabled:
                                    description: enable locality load balancing, this is DestinationRule-level
                                      and will override mesh wide settings in entirety.
                                    nullable: true
                                    type: boolean
                                  failover:
                                    description: 'Optional: only failover or distribute can
                                      be set.'
                                    items:
                                      properties:
                                        from:
                                          description: Originating region.
                                          format: string
                                          type: string
                                        to:
                                          format: string
                                          type: string
                                      type: object
                                    type: array
                                type: object
                              simple:
                                enum:
                                  - ROUND_ROBIN
                                  - LEAST_CONN
                                  - RANDOM
                                  - PASSTHROUGH
                                type: string
                            type: object
                          outlierDetection:
                            properties:
                              baseEjectionTime:
                                description: Minimum ejection duration.
                                type: string
                              consecutive5xxErrors:
                                description: Number of 5xx errors before a host is ejected
                                  from the connection pool.
                                nullable: true
                                type: integer
                              consecutiveErrors:
                                format: int32
                                type: integer
                              consecutiveGatewayErrors:
                                description: Number of gateway errors before a host is ejected
                                  from the connection pool.
                                nullable: true
                                type: integer
                              interval:
                                description: Time interval between ejection sweep analysis.
                                type: string
                              maxEjectionPercent:
                                format: int32
                                type: integer
                              minHealthPercent:
                                format: int32
                                type: integer
                            type: object
                          portLevelSettings:
                            description: Traffic policies specific to individual ports.
                            items:
                              properties:
                                connectionPool:
                                  properties:
                                    http:
                                      description: HTTP connection pool settings.
                                      properties:
                                        h2UpgradePolicy:
                                          description: Specify if http1.1 connection should
                                            be upgraded to http2 for the associated destination.
                                          enum:
                                            - DEFAULT
                                            - DO_NOT_UPGRADE
                                            - UPGRADE
                                          type: string
                                        http1MaxPendingRequests:
                                          description: Maximum number of pending HTTP requests
                                            to a destination.
                                          format: int32
                                          type: integer
                                        http2MaxRequests:
                                          description: Maximum number of requests to a backend.
                                          format: int32
                                          type: integer
                                        idleTimeout:
                                          description: The idle timeout for upstream connection
                                            pool connections.
                                          type: string
                                        maxRequestsPerConnection:
                                          description: Maximum number of requests per connection
                                            to a backend.
                                          format: int32
                                          type: integer
                                        maxRetries:
                                          format: int32
                                          type: integer
                                        useClientProtocol:
                                          description: If set to true, client protocol will
                                            be preserved while initiating connection to backend.
                                          type: boolean
                                      type: object
                                    tcp:
                                      description: Settings common to both HTTP and TCP upstream
                                        connections.
                                      properties:
                                        connectTimeout:
                                          description: TCP connection timeout.
                                          type: string
                                        maxConnections:
                                          description: Maximum number of HTTP1 /TCP connections
                                            to a destination host.
                                          format: int32
                                          type: integer
                                        tcpKeepalive:
                                          description: If set then set SO_KEEPALIVE on the
                                            socket to enable TCP Keepalives.
                                          properties:
                                            interval:
                                              description: The time duration between keep-alive
                                                probes.
                                              type: string
                                            probes:
                                              type: integer
                                            time:
                                              type: string
                                          type: object
                                      type: object
                                  type: object
                                loadBalancer:
                                  description: Settings controlling the load balancer algorithms.
                                  oneOf:
                                    - not:
                                        anyOf:
                                          - required:
                                              - simple
                                          - properties:
                                              consistentHash:
                                                oneOf:
                                                  - not:
                                                      anyOf:
                                                        - required:
                                                            - httpHeaderName
                                                        - required:
                                                            - httpCookie
                                                        - required:
                                                            - useSourceIp
                                                        - required:
                                                            - httpQueryParameterName
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            required:
                                              - consistentHash
                                    - required:
                                        - simple
                                    - properties:
                                        consistentHash:
                                          oneOf:
                                            - not:
                                                anyOf:
                                                  - required:
                                                      - httpHeaderName
                                                  - required:
                                                      - httpCookie
                                                  - required:
                                                      - useSourceIp
                                                  - required:
                                                      - httpQueryParameterName
                                            - required:
                                                - httpHeaderName
                                            - required:
                                                - httpCookie
                                            - required:
                                                - useSourceIp
                                            - required:
                                                - httpQueryParameterName
                                      required:
                                        - consistentHash
                                  properties:
                                    consistentHash:
                                      properties:
                                        httpCookie:
                                          description: Hash based on HTTP cookie.
                                          properties:
                                            name:
                                              description: Name of the cookie.
                                              format: string
                                              type: string
                                            path:
                                              description: Path to set for the cookie.
                                              format: string
                                              type: string
                                            ttl:
                                              description: Lifetime of the cookie.
                                              type: string
                                          type: object
                                        httpHeaderName:
                                          description: Hash based on a specific HTTP header.
                                          format: string
                                          type: string
                                        httpQueryParameterName:
                                          description: Hash based on a specific HTTP query
                                            parameter.
                                          format: string
                                          type: string
                                        minimumRingSize:
                                          type: integer
                                        useSourceIp:
                                          description: Hash based on the source IP address.
                                          type: boolean
                                      type: object
                                    localityLbSetting:
                                      properties:
                                        distribute:
                                          description: 'Optional: only one of distribute or
                                            failover can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating locality, '/' separated,
                                                  e.g.
                                                format: string
                                                type: string
                                              to:
                                                additionalProperties:
                                                  type: integer
                                                description: Map of upstream localities to
                                                  traffic distribution weights.
                                                type: object
                                            type: object
                                          type: array
                                        enabled:
                                          description: enable locality load balancing, this
                                            is DestinationRule-level and will override mesh
                                            wide settings in entirety.
                                          nullable: true
                                          type: boolean
                                        failover:
                                          description: 'Optional: only failover or distribute
                                            can be set.'
                                          items:
                                            properties:
                                              from:
                                                description: Originating region.
                                                format: string
                                                type: string
                                              to:
                                                format: string
                                                type: string
                                            type: object
                                          type: array
                                      type: object
                                    simple:
                                      enum:
                                        - ROUND_ROBIN
                                        - LEAST_CONN
                                        - RANDOM
                                        - PASSTHROUGH
                                      type: string
                                  type: object
                                outlierDetection:
                                  properties:
                                    baseEjectionTime:
                                      description: Minimum ejection duration.
                                      type: string
                                    consecutive5xxErrors:
                                      description: Number of 5xx errors before a host is ejected
                                        from the connection pool.
                                      nullable: true
                                      type: integer
                                    consecutiveErrors:
                                      format: int32
                                      type: integer
                                    consecutiveGatewayErrors:
                                      description: Number of gateway errors before a host
                                        is ejected from the connection pool.
                                      nullable: true
                                      type: integer
                                    interval:
                                      description: Time interval between ejection sweep analysis.
                                      type: string
                                    maxEjectionPercent:
                                      format: int32
                                      type: integer
                                    minHealthPercent:
                                      format: int32
                                      type: integer
                                  type: object
                                port:
                                  properties:
                                    number:
                                      type: integer
                                  type: object
                                tls:
                                  description: TLS related settings for connections to the
                                    upstream service.
                                  properties:
                                    caCertificates:
                                      format: string
                                      type: string
                                    clientCertificate:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    credentialName:
                                      format: string
                                      type: string
                                    mode:
                                      enum:
                                        - DISABLE
                                        - SIMPLE
                                        - MUTUAL
                                        - ISTIO_MUTUAL
                                      type: string
                                    privateKey:
                                      description: REQUIRED if mode is `MUTUAL`.
                                      format: string
                                      type: string
                                    sni:
                                      description: SNI string to present to the server during
                                        TLS handshake.
                                      format: string
                                      type: string
                                    subjectAltNames:
                                      items:
                                        format: string
                                        type: string
                                      type: array
                                  type: object
                              type: object
                            type: array
                          tls:
                            description: TLS related settings for connections to the upstream
                              service.
                            properties:
                              caCertificates:
                                format: string
                                type: string
                              clientCertificate:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              credentialName:
                                format: string
                                type: string
                              mode:
                                enum:
                                  - DISABLE
                                  - SIMPLE
                                  - MUTUAL
                                  - ISTIO_MUTUAL
                                type: string
                              privateKey:
                                description: REQUIRED if mode is `MUTUAL`.
                                format: string
                                type: string
                              sni:
                                description: SNI string to present to the server during TLS
                                  handshake.
                                format: string
                                type: string
                              subjectAltNames:
                                items:
                                  format: string
                                  type: string
                                type: array
                            type: object
                        type: object
                    type: object
                type: object
            type: object
          status:
            description: ServicePolicyStatus defines the observed state of ServicePolicy
            properties:
              completionTime:
                description: Represents time when the strategy was completed. It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
              conditions:
                description: The latest available observations of an object's current state.
                items:
                  description: StrategyCondition describes current state of a strategy.
                  properties:
                    lastProbeTime:
                      description: Last time the condition was checked.
                      format: date-time
                      type: string
                    lastTransitionTime:
                      description: Last time the condition transit from one status to another
                      format: date-time
                      type: string
                    message:
                      description: Human readable message indicating details about last transition.
                      type: string
                    reason:
                      description: reason for the condition's last transition
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown
                      type: string
                    type:
                      description: Type of strategy condition, Complete or Failed.
                      type: string
                  type: object
                type: array
              startTime:
                description: Represents time when the strategy was acknowledged by the controller. It is represented in RFC3339 form and is in UTC.
                format: date-time
                type: string
            type: object
        type: object
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
